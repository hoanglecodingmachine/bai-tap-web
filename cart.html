<!DOCTYPE html>
<html lang="vi">
  <head>
    <title>Gi·ªè h√†ng - Cua hang dien thoai Sphone</title>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="/css/style.css" />
  </head>
  <body>
    <header>
      <a href="index.html"
        ><img
          src="iphone/iphone.png"
          alt="dien thoai thong minh "
          class="banner-img"
          height="50"
          width="50"
        />
      </a>
      <input type="text" placeholder="hay nhap thong tin san pham" />
      <a href="dangnhap.html">dang xuat</a>
      <a href="giohang.html">gio hang</a>
      <a href="thanhtoan.html">thanh toan</a>
      <a href="admin.html">Dang nhap admin</a>
    </header>

    <nav>
      <a href="index.html">trang chu</a>
      <div class="dropdown">
        <a href="#" class="dropbtn">danh muc</a>
        <div class="dropdown-content">
          <a href="iphone.html">iphone</a>
          <a href="samsung.html">sam sung</a>
          <a href="other.html">cac loai khac</a>
        </div>
      </div>
      <a href="index.html">dieu khoan</a>
      <a href="index.html">tin tuc</a>
      <a href="index.html">khuyen mai</a>
      <a href="index.html">thu cu doi moi</a>
      <a href="index.html">chinh sach tra gop</a>
    </nav>

    <main class="content">
      <h1>üõí Gi·ªè h√†ng c·ªßa b·∫°n</h1>

      <div style="max-width: 1000px; margin: 20px auto">
        <table>
          <thead>
            <tr style="background: #1a73e8; color: white">
              <th>H√¨nh ·∫£nh</th>
              <th>T√™n s·∫£n ph·∫©m</th>
              <th>Gi√° (VNƒê)</th>
              <th>S·ªë l∆∞·ª£ng</th>
              <th>Th√†nh ti·ªÅn</th>
              <th>Thao t√°c</th>
            </tr>
          </thead>
          <tbody id="cart-body"></tbody>
        </table>
      </div>

      <div class="total" style="max-width: 1000px; margin: 20px auto 0">
        T·ªïng c·ªông: <span id="total-price">0</span> VNƒê
      </div>

      <div class="checkout" style="max-width: 1000px; margin: 10px auto">
        <button onclick="checkout()">Thanh to√°n</button>
      </div>
    </main>

    <footer>
      <div class="can-le-trai">
        <p>thong tin cac chinh sach</p>
        <ul>
          <li>chinh sach thay cu doi moi</li>
          <li>chinh sach doi tra</li>
          <li>chinh sach tra gop</li>
          <li>chinh sach mua sam online</li>
          <li>chinh sach bao hanh</li>
        </ul>
      </div>
      <div class="Can-l;e-giua">
        <p>Thong tin ve chung toi</p>
        <h1>
          chung toi la nhom sinh vien sgu voi mong muon ban dien thoai gia re
        </h1>
        <h2>cam on ban da ghe xem</h2>
      </div>
      <div class="can-le-phai">
        <p>lien he chung toi</p>
        <a href="facebook.com">fb-sphone</a>
        <a href="instagram.com">instagram</a>
        <a href="messenger.com">messenger</a>
      </div>
    </footer>

    <script>
      // üß≠ ƒê·ªçc gi·ªè h√†ng t·ª´ localStorage (n·∫øu c√≥)
      let cart = JSON.parse(localStorage.getItem("cart")) || [];

      function renderCart() {
        const tbody = document.getElementById("cart-body");
        tbody.innerHTML = "";
        let total = 0;

        if (cart.length === 0) {
          tbody.innerHTML =
            '<tr><td colspan="6" style="padding: 50px; text-align: center;">Gi·ªè h√†ng c·ªßa b·∫°n ƒëang tr·ªëng!</td></tr>';
        }

        cart.forEach((item, index) => {
          const row = document.createElement("tr");
          const totalItem = item.price * item.quantity;
          total += totalItem;

          row.innerHTML = `
            <td><img src="${item.image}" alt="${item.name}"></td>
            <td>${item.name}</td>
            <td>${item.price.toLocaleString("vi-VN")}</td>
            <td><input type="number" min="1" value="${
              item.quantity
            }" onchange="updateQuantity(${index}, this.value)"></td>
            <td>${totalItem.toLocaleString("vi-VN")}</td>
            <td><button onclick="removeItem(${index})">X√≥a</button></td>
          `;
          tbody.appendChild(row);
        });

        document.getElementById("total-price").innerText =
          total.toLocaleString("vi-VN");
      }

      function updateQuantity(index, quantity) {
        // ƒê·∫£m b·∫£o s·ªë l∆∞·ª£ng l√† s·ªë nguy√™n d∆∞∆°ng
        quantity = parseInt(quantity) || 1;
        if (quantity < 1) quantity = 1;

        cart[index].quantity = quantity;
        localStorage.setItem("cart", JSON.stringify(cart));
        renderCart();
      }

      function removeItem(index) {
        cart.splice(index, 1);
        localStorage.setItem("cart", JSON.stringify(cart));
        renderCart();
      }

      function checkout() {
        if (cart.length === 0) {
          alert("Gi·ªè h√†ng c·ªßa b·∫°n ƒëang tr·ªëng!");
          return;
        }

        // üìù L∆∞u ƒë∆°n h√†ng v√†o key kh√°c ƒë·ªÉ s·ª≠ d·ª•ng cho trang x√°c nh·∫≠n/thanh to√°n
        localStorage.setItem("order", JSON.stringify(cart));

        // üßπ X√≥a gi·ªè h√†ng (t√πy ch·ªçn, c√≥ th·ªÉ b·ªè qua b∆∞·ªõc n√†y)
        // localStorage.removeItem("cart");

        // üìç Chuy·ªÉn sang trang thanh to√°n ch√≠nh
        window.location.href = "thanhtoan.html";
      }

      renderCart();
    </script>
  </body>
</html>
